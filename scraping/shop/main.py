import requests
from parsel import Selector
import json

Query = {"requests":[{"indexName":"production_ocuk","params":"clickAnalytics=true&facetFilters=%5B%5B%22all_category_names.level1%3APC%20Components%20%2F%2F%2F%20Graphics%20Cards%22%5D%5D&facets=%5B%22label_keys%22%2C%22availability_status%22%2C%22attributes.manufacturer%22%2C%22attributes.pim_erp_id%22%2C%22attributes.pim_erp_product_id%22%2C%22attributes.pim_erp_product_key%22%2C%22attributes.pim_erp_product_ean%22%2C%22attributes.pim_erp_brand_id%22%2C%22attributes.pim_erp_brand_name%22%2C%22attributes.pim_erp_product_mpn%22%2C%22attributes.pim_erp_product_eol%22%2C%22attributes.pim_erp_product_name%22%2C%22attributes.pim_erp_product_online%22%2C%22attributes.pim_product_family_series%22%2C%22attributes.pim_colour_main%22%2C%22attributes.pim_special_colour_naming_main%22%2C%22attributes.pim_design%22%2C%22attributes.pim_keyboard_size_type%22%2C%22attributes.pim_switch_type%22%2C%22attributes.pim_switch_type_name%22%2C%22attributes.pim_lighting_colour%22%2C%22attributes.pim_keyboard_language%22%2C%22attributes.pim_keyboard_layout%22%2C%22attributes.pim_pc_system_resolution%22%2C%22attributes.pim_cpu_series%22%2C%22attributes.pim_cpu_name%22%2C%22attributes.pim_cpu_socket%22%2C%22attributes.pim_gpu_family_series%22%2C%22attributes.pim_graphics_card_in_system%22%2C%22attributes.pim_gpu_series_name%22%2C%22attributes.pim_vram_size%22%2C%22attributes.pim_case_type%22%2C%22attributes.pim_memory_quantity%22%2C%22attributes.pim_memory_type%22%2C%22attributes.pim_memory_clock_frequency%22%2C%22attributes.pim_ssd_type%22%2C%22attributes.pim_ssd_drive_capacity_total%22%2C%22attributes.pim_hdd_drive_capacity_total%22%2C%22attributes.pim_efficiency%22%2C%22attributes.pim_wattage%22%2C%22attributes.pim_wifi_bluetooth%22%2C%22attributes.pim_cooling_method%22%2C%22attributes.pim_display_size%22%2C%22attributes.pim_display_refresh_rate%22%2C%22attributes.pim_display_resolution%22%2C%22attributes.pim_display_response_time%22%2C%22attributes.pim_display_panel_type%22%2C%22attributes.pim_display_aspect_ratio%22%2C%22attributes.pim_display_connectors%22%2C%22attributes.pim_curved_display%22%2C%22attributes.pim_features%22%2C%22attributes.pim_total_power_output%22%2C%22attributes.pim_80plus_efficiency%22%2C%22attributes.pim_fan_size%22%2C%22attributes.pim_included_fans%22%2C%22attributes.pim_number_included_fans%22%2C%22attributes.pim_40_mm_fans%22%2C%22attributes.pim_60_mm_fans%22%2C%22attributes.pim_50_mm_fans%22%2C%22attributes.pim_70_mm_fans%22%2C%22attributes.pim_80_mm_fans%22%2C%22attributes.pim_92_mm_fans%22%2C%22attributes.pim_120_mm_fans%22%2C%22attributes.pim_130_mm_fans%22%2C%22attributes.pim_140_mm_fans%22%2C%22attributes.pim_160_mm_fans%22%2C%22attributes.pim_170_mm_fans%22%2C%22attributes.pim_180_mm_fans%22%2C%22attributes.pim_200_mm_fans%22%2C%22attributes.pim_220_mm_fans%22%2C%22attributes.pim_larger_than_220_mm_fans%22%2C%22attributes.pim_mobile_cpu_name%22%2C%22attributes.pim_cpu_architecture%22%2C%22attributes.pim_cpu_cores%22%2C%22attributes.pim_cpu_cores_efficiency%22%2C%22attributes.pim_cpu_cores_performance%22%2C%22attributes.pim_cpu_threads%22%2C%22attributes.pim_cpu_packaging%22%2C%22attributes.pim_included_cpu_cooler%22%2C%22attributes.pim_cpu_cooler_type%22%2C%22attributes.pim_cpu_manufacturer%22%2C%22attributes.pim_cpu_power_supply%22%2C%22attributes.pim_product_name%22%2C%22attributes.pim_colour_main_fitting%22%2C%22attributes.pim_ecc_support%22%2C%22attributes.pim_fan_compatibility%22%2C%22attributes.pim_colour_secondary_fitting%22%2C%22attributes.pim_mobile_gpu_name%22%2C%22attributes.pim_12_pin_gpu_power_connectors%22%2C%22attributes.pim_gpu_number_of_fans%22%2C%22attributes.pim_max_gpu_clock_base%22%2C%22attributes.pim_max_gpu_clock_boost%22%2C%22attributes.pim_multi_gpu_standard%22%2C%22attributes.pim_motherboard_chipset%22%2C%22attributes.pim_motherboard_formfactor%22%2C%22attributes.pim_compatible_motherboard_formats%22%2C%22attributes.pim_max_motherboard_format%22%2C%22attributes.pim_psu_format%22%2C%22attributes.pim_psu_fan%22%2C%22attributes.pim_psu_installation_depth%22%2C%22attributes.pim_psu_included%22%2C%22attributes.pim_side_panel%22%2C%22attributes.pim_expansion_slots_pci_slots%22%2C%22attributes.pim_needed_expansion_slots%22%2C%22attributes.pim_2_5_and_3_5_inch_internal_drive_bay%22%2C%22attributes.pim_2_5_inch_internal_drive_bay%22%2C%22attributes.pim_3_5_inch_external_drive_bay%22%2C%22attributes.pim_3_5_inch_internal_drive_bay%22%2C%22attributes.pim_5_25_inch_external_drive_bay%22%2C%22attributes.pim_max_radiator_compatibility%22%2C%22attributes.pim_radiator_type%22%2C%22attributes.pim_radiator_size%22%2C%22attributes.pim_radiator_height_with_fan%22%2C%22attributes.pim_radiator_colour_main_cage%22%2C%22attributes.pim_radiator_colour_secondary_cage%22%2C%22attributes.pim_radiator_colour_main_fins%22%2C%22attributes.pim_radiator_colour_secondary_fins%22%2C%22attributes.pim_fan_radiator_mounting%22%2C%22attributes.pim_colour_main_cable%22%2C%22attributes.pim_colour_secondary_cable%22%2C%22attributes.pim_cable_type%22%2C%22attributes.pim_cable_length%22%2C%22attributes.pim_cable_shielded%22%2C%22attributes.pim_cable_shielding%22%2C%22attributes.pim_cable_sleeved%22%2C%22attributes.pim_cable_sleeving%22%2C%22attributes.pim_meta_description%22%2C%22attributes.pim_meta_keywords%22%2C%22attributes.pim_number_of_modules%22%2C%22attributes.pim_product_short_description%22%2C%22attributes.pim_pcie_x16_slots_total%22%2C%22attributes.pim_product_long_description%22%2C%22attributes.pim_pcie_x4_slots_total%22%2C%22attributes.pim_special_colour_naming_secondary%22%2C%22attributes.pim_meta_robots%22%2C%22attributes.pim_pcie_x1_slots_total%22%2C%22attributes.pim_product_specs_text%22%2C%22attributes.pim_memory_latency%22%2C%22attributes.pim_pcie_5_0_x16_mechanical_slot%22%2C%22attributes.pim_product_pictures%22%2C%22attributes.pim_pcie_5_0_x4_mechanical_slot%22%2C%22attributes.pim_product_picture_local%22%2C%22attributes.pim_memory_voltage%22%2C%22attributes.pim_product_url%22%2C%22attributes.pim_pcie_4_0_x16_mechanical_slot%22%2C%22attributes.pim_memory_module_height%22%2C%22attributes.pim_pcie_4_0_x4_mechanical_slot%22%2C%22attributes.pim_product_video_url%22%2C%22attributes.pim_pcie_4_0_x1_mechanical_slot%22%2C%22attributes.pim_product_files%22%2C%22attributes.pim_memory_slots%22%2C%22attributes.pim_hyper_multithreading%22%2C%22attributes.pim_pcie_3_0_x16_mechanical_slot%22%2C%22attributes.pim_launch_date%22%2C%22attributes.pim_open_multiplier%22%2C%22attributes.pim_pcie_3_0_x4_mechanical_slot%22%2C%22attributes.pim_inner_diameter%22%2C%22attributes.pim_launch_time%22%2C%22attributes.pim_outer_diameter%22%2C%22attributes.pim_memory_controller%22%2C%22attributes.pim_pcie_3_0_x1_mechanical_slot%22%2C%22attributes.pim_tdp%22%2C%22attributes.pim_tube_length%22%2C%22attributes.pim_pcie_2_0_x16_mechanical_slot%22%2C%22attributes.pim_pcie_2_0_x4_mechanical_slot%22%2C%22attributes.pim_pcie_2_0_x1_mechanical_slot%22%2C%22attributes.pim_pci_slot%22%2C%22attributes.pim_uv_active%22%2C%22attributes.pim_uv_colour%22%2C%22attributes.pim_esata%22%2C%22attributes.pim_fan_connectors%22%2C%22attributes.pim_fan_connectors_3_pin%22%2C%22attributes.pim_fan_connectors_4_pin_pwm%22%2C%22attributes.pim_fan_rgb_control%22%2C%22attributes.pim_fin_density_fpi%22%2C%22attributes.pim_fire_safety_label_requirements%22%2C%22attributes.pim_fluid_type%22%2C%22attributes.pim_foldable%22%2C%22attributes.pim_glasses_glas_type%22%2C%22attributes.pim_hdd%22%2C%22attributes.pim_hdmi_sockets%22%2C%22attributes.pim_hdr_standard%22%2C%22attributes.pim_headphone_type%22%2C%22attributes.pim_incl_additional_keys%22%2C%22attributes.pim_input_power%22%2C%22attributes.pim_key_type%22%2C%22attributes.pim_lan%22%2C%22attributes.pim_lan_ports%22%2C%22attributes.pim_language_layout%22%2C%22attributes.pim_m2_pcie_2_0_x2%22%2C%22attributes.pim_m2_pcie_2_0_x2_sata_6g%22%2C%22attributes.pim_m2_pcie_2_0_x4%22%2C%22attributes.pim_m2_pcie_3_0_x2%22%2C%22attributes.pim_m2_pcie_3_0_x2_sata_6g%22%2C%22attributes.pim_m2_pcie_3_0_x4%22%2C%22attributes.pim_m2_pcie_3_0_x4_sata_6g%22%2C%22attributes.pim_m2_pcie_4_0_x2%22%2C%22attributes.pim_m2_pcie_4_0_x4%22%2C%22attributes.pim_m2_pcie_4_0_x4_sata_6g%22%2C%22attributes.pim_m2_sata_6g%22%2C%22attributes.pim_material_base_plate%22%2C%22attributes.pim_material_heat_sink%22%2C%22attributes.pim_material_label%22%2C%22attributes.pim_material_main_seat_cover%22%2C%22attributes.pim_material_secondary_seat_cover%22%2C%22attributes.pim_max_adjusted_weight%22%2C%22attributes.pim_max_audio_frequency%22%2C%22attributes.pim_max_dpi%22%2C%22attributes.pim_max_fan_rpm%22%2C%22attributes.pim_max_memory_clock%22%2C%22attributes.pim_max_microphone_frequency%22%2C%22attributes.pim_max_monitor_size%22%2C%22attributes.pim_max_monitor_weight_total%22%2C%22attributes.pim_max_number_of_monitors%22%2C%22attributes.pim_max_playback_quality%22%2C%22attributes.pim_max_recording_quality%22%2C%22attributes.pim_max_tdp%22%2C%22attributes.pim_max_water_flow%22%2C%22attributes.pim_meta_title%22%2C%22attributes.pim_microphone_ergonomics%22%2C%22attributes.pim_microphone_sensitivity%22%2C%22attributes.pim_min_adjusted_weight%22%2C%22attributes.pim_min_audio_frequency%22%2C%22attributes.pim_min_microphone_frequency%22%2C%22attributes.pim_mobile_device_type%22%2C%22attributes.pim_mobile_storage_capacity_total%22%2C%22attributes.pim_mobile_storage_type%22%2C%22attributes.pim_modular_power_supply%22%2C%22attributes.pim_modular_type%22%2C%22attributes.pim_mounting_type%22%2C%22attributes.pim_nand_type%22%2C%22attributes.pim_noise_dampening%22%2C%22attributes.pim_notebook_size%22%2C%22attributes.pim_number_of_buttons%22%2C%22attributes.pim_number_of_heatpipes%22%2C%22attributes.pim_number_of_slots%22%2C%22attributes.pim_optical_drive%22%2C%22attributes.pim_power_consumption%22%2C%22attributes.pim_power_supply%22%2C%22attributes.pim_power_supply_connectors%22%2C%22attributes.pim_prepared_for_lighting%22%2C%22attributes.pim_pump_type%22%2C%22attributes.pim_rated_voltage%22%2C%22attributes.pim_rotatable%22%2C%22attributes.pim_sas_internal%22%2C%22attributes.pim_sata_6g_internal%22%2C%22attributes.pim_sata_express_internal%22%2C%22attributes.pim_sata_power_connectors%22%2C%22attributes.pim_semi_passive_power_supply%22%2C%22attributes.pim_semi_passive_type%22%2C%22attributes.pim_sensitivity%22%2C%22attributes.pim_sensor_model%22%2C%22attributes.pim_shock_resistance_during_operation%22%2C%22attributes.pim_slot_diameter%22%2C%22attributes.pim_sound_channels%22%2C%22attributes.pim_sound_type%22%2C%22attributes.pim_soundchip%22%2C%22attributes.pim_ssd%22%2C%22attributes.pim_standard_specification%22%2C%22attributes.pim_suitable_for_hardtubes%22%2C%22attributes.pim_thermal_conductivity%22%2C%22attributes.pim_thunderbolt_3_type_c%22%2C%22attributes.pim_touchpad%22%2C%22attributes.pim_touchscreen%22%2C%22attributes.pim_uk_energy_label%22%2C%22attributes.pim_usb_2_0_external_type_a%22%2C%22attributes.pim_usb_2_0_internal%22%2C%22attributes.pim_usb_3_0_31_32_internal_type_c%22%2C%22attributes.pim_usb_3_0_external_type_a%22%2C%22attributes.pim_usb_3_0_external_type_c%22%2C%22attributes.pim_usb_3_0_internal%22%2C%22attributes.pim_usb_3_1_external_type_a%22%2C%22attributes.pim_usb_3_1_external_type_c%22%2C%22attributes.pim_usb_3_2_external_type_c%22%2C%22attributes.pim_usb_4_g2x2_external_type_c%22%2C%22attributes.pim_usb_4_g3x2_external_type_c%22%2C%22attributes.pim_usb_pass_through%22%2C%22attributes.pim_usb_soundcard_included%22%2C%22attributes.pim_ventilation_type%22%2C%22attributes.pim_vesa_standard%22%2C%22attributes.pim_viscosity%22%2C%22attributes.pim_connection_type%22%2C%22attributes.pim_water_cooling_component%22%2C%22attributes.pim_water_cooling_connection_type%22%2C%22attributes.pim_water_cooling_connectors%22%2C%22attributes.pim_water_cooling_purpose%22%2C%22attributes.pim_keyboard_type%22%2C%22attributes.pim_watercooling%22%2C%22attributes.pim_webcam%22%2C%22attributes.pim_webcam_resolution%22%2C%22attributes.pim_weight_adjustable%22%2C%22attributes.pim_weight_limit%22%2C%22attributes.pim_4_pin_molex_power_connectors%22%2C%22attributes.pim_6_2_pin_pcie_power_connectors%22%2C%22attributes.pim_6_pin_pcie_power_connectors%22%2C%22attributes.pim_8_pin_pcie_power_connectors%22%2C%22attributes.pim_adaptive_sync_technology%22%2C%22attributes.pim_angle%22%2C%22attributes.pim_audio_compatibility%22%2C%22attributes.pim_audio_inputs%22%2C%22attributes.pim_audio_out%22%2C%22attributes.pim_audio_outputs%22%2C%22attributes.pim_audio_outputs_inputs%22%2C%22attributes.pim_battery_capacity%22%2C%22attributes.pim_blue_light_filter%22%2C%22attributes.pim_cache%22%2C%22attributes.pim_card_reader%22%2C%22attributes.pim_case_fan_controller%22%2C%22attributes.pim_content_volume%22%2C%22attributes.pim_content_weight%22%2C%22attributes.pim_contrast_ratio_dynamic%22%2C%22attributes.pim_cooler_for_specific_gpu_design%22%2C%22attributes.pim_cybenetics_efficiency_level_eta%22%2C%22attributes.pim_data_transfer_rate_average%22%2C%22attributes.pim_data_transfer_rate_max%22%2C%22attributes.pim_dedicated_multi_media_keys%22%2C%22attributes.pim_disc_loading_type%22%2C%22attributes.pim_display_included%22%2C%22attributes.pim_display_reflection_type%22%2C%22attributes.pim_drive_category_purpose%22%2C%22attributes.pim_drive_rpm%22%2C%22attributes.pim_drive_size%22%2C%22attributes.pim_drive_type%22%2C%22attributes.pim_driver_size%22%2C%22attributes.pim_driver_type%22%2C%22attributes.pim_heatsink_included%22%2C%22attributes.cashbackcashback%22%2C%22attributes.voucher%22%2C%22attributes.price_decimal%22%2C%22attributes.price_gross_decimal%22%2C%22attributes.rating%22%2C%22attributes.rating_group%22%2C%22price_gross_decimal%22%2C%22rating_rounded%22%2C%22all_category_names.level0%22%2C%22all_category_names.level1%22%2C%22all_category_names.level2%22%5D&highlightPostTag=__%2Fais-highlight__&highlightPreTag=__ais-highlight__&hitsPerPage=60&maxValuesPerFacet=100&page=0&query=nvidia&removeWordsIfNoResults=allOptional&snippetEllipsisText=%E2%80%A6&tagFilters=&userToken=75fe8bd3fd41946bec5d685f8c1e90bff291167a"}]}
url = "https://78jqob38q3-dsn.algolia.net/1/indexes/*/queries?x-algolia-agent=Algolia%20for%20JavaScript%20(4.14.3)%3B%20Browser%20(lite)%3B%20instantsearch.js%20(4.49.1)%3B%20JS%20Helper%20(3.11.1)&x-algolia-api-key=f5c8d3eaa2f0d51e934864344a1efa60&x-algolia-application-id=78JQOB38Q3"

def default():
    
    response = requests.post(url, json=Query)
    
    json_data = response.json()
    
    products = json_data['results'][0]['hits']
    results = []
    
    for product in products:
        results.append(map_product(product))

            
    with open(f'output.json', 'w', encoding = 'utf-8') as f:
        json.dump(results,f)
    
def map_product(product):
        
    return{
            'name' : product['abstract_name'],
            'url' : f"https://www.overclockers.co.uk{product['url']}",
            'price' : product['price'],
            'availability_status' : product['availability_status']
            }
